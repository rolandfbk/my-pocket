<main>
  <div class="app_header">
    <%= link_to :back, class: "btn_open_menu" do%>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
    <% end %>
    <h2>Transactions</h2>
    <%= link_to "Add new", new_category_payment_path(@category.id), class: "btn_add_new" %>
  </div>
  <div class="app_content fix_gap">
    <% if can? :manage, @category %>
        <div class="category_details">
          <div class="category_photo">
            <% if @category.icon.attached? %>
              <img src="<%= url_for(@category.icon) %>" alt="<%= @category.name %>">
            <% else %>
              <img src="/assets/logo.png" alt="logo" class="no_category_icon" />
            <% end %>
          </div>
          <div class="category_name fix_align">
            <h2><%= @category.name %></h2>
            <hr class="category_hr">
            <h4><span>TOTAL TRANSACTIONS</span><span>$ <%= @total_payments %></span></h4>
          </div>
        </div>
        <div class="payment_details">
          <% @payments.each do |payment| %>
            <hr class="category_hr">
            <div class="category_details fix_pad">
              <div class="payment_name">
                <h2><%= payment.name %></h2>
                <h4><%= payment.created_at.strftime("%d %b %Y  %H:%M") %></h4>
                <div class="payment_amount">
                  <h2>TOTAL PAYMENT</h2>
                  <h3>$ <%= payment.amount %></h3>
                </div>
              </div>
            </div>
          <% end %>
        </div>
    <% end %>
  </div>
</main>
